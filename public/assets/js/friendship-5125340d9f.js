class Friendship{constructor(t){this.toggler=t,this.toggleFriendship(this.toggler)}toggleFriendship(t){const e=this;t.addEventListener("click",(async t=>{t.preventDefault(),t.stopPropagation();const o=t.target,n=o.getAttribute("data-url"),s=await e.fetchData(n,"POST");"error"!==s.response&&(e.notify(s.message,s.response),s.data.unfriended&&(o.textContent="Follow"),s.data.unfriended||(o.textContent="Unfollow"))}))}async fetchData(t,e,o={}){const n=await fetch(t,{method:e,body:o});return await n.json()}notify(t,e){new Noty({theme:"metroui",text:t,type:e,layout:"topRight",timeout:3e3}).show()}}try{for(let t of document.getElementsByClassName("follow_btn")){new Friendship(t)}}catch(t){console.log(t)}